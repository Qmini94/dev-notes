---
date: 2026-01-27
tags: [Troubleshooting, ProjectName, TechStack]
status: Solved
---

# [주제: 예) CI/CD 무중단 배포 중 Nginx 스위칭 지연 문제]

## 1. 🚨 문제 상황 (Context & Problem)
> *어떤 상황에서 어떤 문제가 발생했나요? 구체적인 에러 로그나 현상을 기술합니다.*

- **상황**: [예: Jenkins 파이프라인을 통해 Docker 컨테이너를 배포하는 과정]
- **현상**: 
    - [예: 배포 직후 약 5초간 502 Bad Gateway 에러 발생]
    - [예: 기존 컨테이너가 종료되기 전 새 컨테이너가 트래픽을 받을 준비가 되지 않음]
- **에러 로그**:

## 2. 🕵️‍♂️ 원인 분석 (Root Cause Analysis)
> *왜 이런 문제가 발생했나요? 가설 설정 및 검증 과정을 기록합니다.*

1. **가설 1**: [예: Nginx의 `reload` 시점 문제일 것이다.]
    - **검증**: [예: 로그 타임스탬프 확인 결과 reload는 정상적으로 수행됨.]
2. **가설 2**: [예: Spring Boot 애플리케이션의 구동 시간이 헬스 체크 시간보다 길 것이다.]
    - **검증**: [예: `docker logs` 확인 결과, 앱이 완전히 뜨기 전에 Nginx가 트래픽을 스위칭하고 있었음.]
3. **최종 원인**: 
    - [예: Docker Compose의 `healthcheck` 설정 미흡 및 Nginx의 `upstream` 전환 타이밍 불일치]

## 3. 🛠 해결 과정 (Solution)
> *문제를 해결하기 위해 어떤 방법을 적용했나요? 코드 변경 사항이나 설정 변경을 기록합니다.*

### 시도한 방법 1 (실패/부분 성공)
- **내용**: [예: `sleep 10` 명령어를 스크립트에 추가하여 강제로 대기.]
- **결과**: [예: 배포 시간만 늘어나고, 근본적인 해결책이 아님.]

### 시도한 방법 2 (최종 해결책)
- **내용**: [예: `readinessProbe` (또는 docker healthcheck) 설정 강화 및 Blue/Green 스크립트 로직 수정]
- **적용 코드**:

## 4. 📈 결과 및 성과 (Result & Impact)
> *해결 후 어떤 변화가 있었나요? 정량적/정성적 성과를 기술합니다.*

- **결과**: [예: 배포 시 502 에러 완전 제거, 무중단 배포 성공률 100% 달성]
- **성능 개선**: [예: 배포 스크립트 안정성 확보로 운영 리소스 감소]

## 5. 💡 배운 점 (Lessons Learned)
> *이 과정을 통해 무엇을 배웠나요? 추후 비슷한 문제를 방지하기 위한 아이디어는?*

- [예: 애플리케이션 레벨의 `Warm-up` 시간과 인프라 레벨의 스위칭 타이밍을 맞추는 것이 중요하다는 것을 배움.]
- [예: 쉘 스크립트 작성 시 예외 처리를 꼼꼼히 해야 함.]

## 6. 🔗 참고 자료 (References)
- [링크 제목](URL)
- [공식 문서 링크](URL)

#### 1. CI/CD 및 무중단 배포 (DevOps 능력)

- **매력 포인트:** 개발 생산성 향상과 서비스 안정성을 모두 챙길 수 있음을 증명.
- **경력기술서 표현 예시:**
    - "배포 시 서비스 중단을 방지하고 배포 주기를 단축하기 위해 Docker와 Jenkins를 활용한 블루/그린 무중단 배포 파이프라인 구축."
    - "Nginx 스위칭 타이밍 이슈를 해결하여 배포 다운타임을 0초로 단축하고, 롤백 프로세스를 자동화하여 운영 안정성 확보."