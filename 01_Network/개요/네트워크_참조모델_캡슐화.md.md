## 1. 개요

네트워크 통신은 송신자의 데이터가 물리적 신호로 변환되어 전달되고, 수신자가 이를 다시 해석하는 복합적인 과정을 거칩니다. 이 과정을 체계적으로 이해하고 설계하기 위해 네트워크 참조 모델이라는 계층 구조가 사용됩니다.

본 문서는 OSI 7계층과 TCP/IP 모델의 구조적 차이, 데이터가 계층을 통과하며 캡슐화되는 과정, 그리고 각 계층에서 사용되는 PDU(Protocol Data Unit)의 개념을 정리합니다. 참조 모델은 네트워크를 동작시키는 주체가 아니라, 통신 과정을 이해하고 문제를 진단하기 위한 논리적 밑그림이라는 점을 전제로 합니다.

---

## 2. 참조 모델의 존재 이유

네트워크 참조 모델은 통신 과정을 계층으로 나눔으로써 두 가지 핵심 목적을 달성합니다.

**구성 및 설계의 용이성** 각 계층별로 수행해야 할 역할이 명확하게 정의되어 있어, 목적에 맞는 프로토콜과 장비를 계층별로 배치하여 네트워크를 설계할 수 있습니다. 새로운 프로토콜이나 장비를 도입할 때에도 해당 계층만 교체하면 되므로, 전체 시스템에 미치는 영향을 최소화할 수 있습니다.

**문제 진단의 체계화** 통신 장애가 발생했을 때 최하위 계층(물리적 연결)부터 순차적으로 점검하며 원인을 좁혀갈 수 있습니다. 이는 실무에서 "ping은 되는데 HTTP 접속이 안 된다"와 같은 상황을 L3은 정상, L4 이상에서 문제라는 식으로 계층 단위로 판단할 수 있게 합니다.

---

## 3. OSI 7계층 모델과 TCP/IP 모델

### 3.1 OSI 7계층 모델

OSI 모델은 국제 표준화 기구(ISO)에서 정의한 참조 모델로, 통신 과정을 7개의 계층으로 분류합니다. 각 계층은 하위 계층이 제공하는 기능 위에서 동작하며, 상위 계층으로 갈수록 사용자 및 애플리케이션에 가까워집니다.

|계층|이름|핵심 역할|PDU|
|:--|:--|:--|:--|
|7|응용 계층 (Application)|사용자 및 애플리케이션에 네트워크 서비스 제공|Data|
|6|표현 계층 (Presentation)|데이터 인코딩, 압축, 암호화|Data|
|5|세션 계층 (Session)|애플리케이션 간 연결 상태(세션) 관리|Data|
|4|전송 계층 (Transport)|프로세스 식별(포트), 신뢰성 보장|Segment / Datagram|
|3|네트워크 계층 (Network)|논리적 주소(IP) 기반 라우팅, LAN 간 통신|Packet|
|2|데이터 링크 계층 (Data Link)|MAC 주소 기반 인접 노드 간 전송, 오류 감지|Frame|
|1|물리 계층 (Physical)|비트 신호의 물리적 전송 (전기, 빛, 전파)|Bit|

### 3.2 TCP/IP 모델

TCP/IP 모델은 OSI 모델이 이론적 정의에 중점을 둔 것과 달리, 실제 구현된 프로토콜을 기준으로 구성된 실용적 모델입니다. 4개의 계층으로 이루어져 있으며, OSI 모델과 정확히 1:1로 대응되지는 않습니다.

|TCP/IP 계층|OSI 계층과의 대응|대표 프로토콜|
|:--|:--|:--|
|응용 계층 (Application)|L5 + L6 + L7 통합|HTTP, DNS, SSH, FTP|
|전송 계층 (Transport)|L4|TCP, UDP|
|인터넷 계층 (Internet)|L3|IP, ICMP, ARP|
|네트워크 액세스 계층 (Network Access)|L1 + L2|Ethernet, Wi-Fi|

### 3.3 두 모델의 실무적 위치

OSI 7계층은 네트워크 문제를 진단하거나 계층별 역할을 논의할 때 공통 언어로 사용됩니다. 반면 실제 시스템 구현과 프로토콜 학습은 TCP/IP 모델을 기준으로 이루어지는 경우가 대부분입니다.

실무에서 주의할 점은, 모든 프로토콜과 장비가 특정 계층에 완벽하게 대응되지는 않는다는 것입니다. 예를 들어 라우터는 L3 장비로 분류되지만 L2 이하의 기능을 포괄적으로 수행하며, ARP는 L2와 L3의 경계에 걸쳐 동작합니다. 참조 모델은 엄밀한 규격이 아니라 이해와 소통을 위한 프레임워크로 활용하는 것이 적절합니다.

---

## 4. 캡슐화와 역캡슐화

### 4.1 캡슐화 (Encapsulation)

캡슐화는 송신 측에서 데이터가 상위 계층에서 하위 계층으로 내려가면서 각 계층의 프로토콜 헤더가 순차적으로 덧붙여지는 과정을 의미합니다.

각 계층은 자신의 역할에 필요한 제어 정보를 헤더에 담아 추가하며, 상위 계층에서 내려온 전체 데이터(헤더 + 페이로드)는 하위 계층 입장에서 하나의 페이로드가 됩니다. 데이터 링크 계층에서는 헤더뿐만 아니라 오류 검출을 위한 트레일러(Trailer)도 함께 추가됩니다.

```
[응용 계층]      | Data |
[전송 계층]      | TCP Header | Data |
[네트워크 계층]  | IP Header | TCP Header | Data |
[데이터 링크]    | Eth Header | IP Header | TCP Header | Data | Trailer |
[물리 계층]      → 비트 신호로 변환하여 전송
```

### 4.2 역캡슐화 (Decapsulation)

역캡슐화는 수신 측에서 캡슐화의 반대 과정을 수행하는 것입니다. 최하위 계층부터 해당 계층의 헤더(및 트레일러)를 제거하며 상위 계층으로 데이터를 전달합니다. 최종적으로 애플리케이션이 수신하는 것은 송신자가 보낸 원본 데이터(페이로드)입니다.

### 4.3 캡슐화의 설계 의도

캡슐화 구조는 각 계층이 자신의 헤더만 처리하고 나머지는 관여하지 않는 계층 간 독립성을 보장합니다. 이 구조 덕분에 특정 계층의 프로토콜을 교체하더라도 다른 계층에는 영향을 미치지 않습니다. 예를 들어 전송 계층에서 TCP를 UDP로 변경하더라도 하위 계층(IP, Ethernet)의 동작에는 변화가 없습니다.

이러한 특성은 실무에서 Wireshark와 같은 패킷 분석 도구로 특정 계층의 헤더만 선택적으로 분석할 수 있는 기반이 되기도 합니다.

---

## 5. PDU (Protocol Data Unit)

각 계층에서 처리하는 데이터 단위를 PDU라고 합니다. 계층마다 PDU의 명칭이 다르며, 이는 해당 계층이 부여한 헤더와 함께 하나의 처리 단위로 취급되기 때문입니다.

|계층|PDU 명칭|비고|
|:--|:--|:--|
|응용 / 표현 / 세션 계층|Data|애플리케이션이 생성한 원본 데이터|
|전송 계층|Segment (TCP) / Datagram (UDP)|프로토콜에 따라 명칭이 구분됩니다|
|네트워크 계층|Packet|IP 패킷으로 지칭하기도 합니다|
|데이터 링크 계층|Frame|헤더 + 트레일러가 모두 포함된 단위입니다|
|물리 계층|Bit|전기/빛/전파 신호로 전송되는 최소 단위입니다|

실무에서는 계층을 엄밀하게 구분하지 않고 "패킷"이라는 용어를 통칭하여 사용하는 경우가 많습니다. 다만 기술 문서나 면접에서는 정확한 PDU 명칭을 사용하는 것이 바람직합니다.

---

## 6. 실무 관점 및 개발자 시사점

### 6.1 참조 모델의 한계 인식

참조 모델은 네트워크를 작동시키는 주체가 아니며, 프로토콜처럼 반드시 준수해야 하는 규격도 아닙니다. 실제 프로토콜이나 장비가 특정 계층에 완벽하게 대응되지 않는 경우가 많으며, 개발자 입장에서 실질적인 학습 대상은 모델 자체보다 프로토콜과 장비의 동작 원리입니다.

### 6.2 개발자에게 요구되는 계층 지식

Infrastructure as Code 시대에서 개발자의 네트워크 계층 지식 요구 범위는 확장되고 있습니다. 특히 다음 영역은 백엔드 개발자에게 직접적으로 관련됩니다.

|영역|관련 계층|실무 활용 예시|
|:--|:--|:--|
|IP 주소 / 서브넷 설계|L3|VPC 설계, 보안 그룹 설정, CIDR 할당|
|포트 / 프로세스 식별|L4|서비스 포트 설정, 방화벽 인바운드 규칙, 컨테이너 포트 매핑|
|DNS / HTTP|L7|도메인 설정, API 설계, TLS 인증서 관리|
|패킷 분석|L2~L4|Wireshark/tcpdump를 활용한 장애 원인 분석|

### 6.3 OSI 모델 기반 장애 진단 접근법

네트워크 장애 발생 시 OSI 계층을 기준으로 하위 계층부터 순차적으로 점검하는 방식이 효과적입니다. 이 접근법은 "물리적 연결 → IP 도달 가능 → 포트 응답 → 애플리케이션 정상"의 순서로 정상/비정상 경계를 좁혀가는 구조이며, 클라우드 환경에서 NAT, 로드밸런서, 보안 그룹 등이 개입하는 경우에도 계층 단위 판단이 유효합니다.

```
L1 점검: 네트워크 인터페이스 UP 여부 (ip link, ifconfig)
   ↓
L2 점검: ARP 테이블, MAC 인식 여부 (arp -a)
   ↓
L3 점검: IP 도달 가능 여부 (ping, traceroute)
   ↓
L4 점검: 포트 리스닝 상태, 방화벽 규칙 (ss -nltp, telnet)
   ↓
L7 점검: HTTP 응답 코드, 애플리케이션 로그 (curl, 브라우저 DevTools)
```

이 계층별 진단 흐름은 본 네트워크 문서 시리즈 전반에서 반복적으로 참조됩니다.