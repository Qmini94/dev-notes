## 1. 개요

TCP/IP 모델은 **실제 인터넷 통신을 구현하기 위해 사용되는 실무 중심 네트워크 모델**이다.  
OSI 7계층이 개념적 참조 모델이라면, TCP/IP는 운영체제와 네트워크 스택에 실제로 구현된 구조에 가깝다.

현대 네트워크, 특히 서버·클라우드·인터넷 환경에서 발생하는 대부분의 문제는  
결국 TCP/IP 모델 기준으로 분석되고 해결된다.

---

## 2. TCP/IP 계층 구조 개요

TCP/IP 모델은 총 4계층으로 구성된다.

|TCP/IP 계층|OSI 대응 계층|
|---|---|
|Application|L7 ~ L5|
|Transport|L4|
|Internet|L3|
|Network Interface|L2 ~ L1|

OSI 모델의 세분화된 개념을 **실제 동작 단위로 압축**한 구조라고 볼 수 있다.

---

## 3. 계층별 동작 논리

### 3.1 Network Interface 계층

물리적 네트워크 매체를 통해 데이터 프레임을 송수신하는 계층이다.  
OSI의 물리 계층(L1)과 데이터 링크 계층(L2)을 포함한다.

- **PDU**: Frame / Bit
    
- **주요 기술**: Ethernet, ARP, MAC
    
- **동작 논리**:  
    "같은 네트워크에서 상대 장비의 MAC 주소를 알고 실제 신호를 전달할 수 있는가?"
    

이 계층에서 문제가 발생하면 IP 이전 단계에서 통신이 끊기며,  
상위 계층에서는 **아무 로그도 남지 않는 경우**가 많다.

---

### 3.2 Internet 계층

서로 다른 네트워크 간 패킷 전달을 담당한다.  
논리적 주소(IP)를 기반으로 라우팅이 수행된다.

- **PDU**: Packet
    
- **주요 프로토콜**: IP, ICMP
    
- **동작 논리**:  
    "이 패킷을 어떤 경로로 목적지 네트워크까지 보낼 것인가?"
    

`ping` 테스트는 이 계층의 정상 여부를 확인하는 대표적인 방법이다.  
다만, **Internet 계층이 정상이라고 상위 계층이 정상이라는 의미는 아니다.**

---

### 3.3 Transport 계층

호스트 내부에서 실행 중인 프로세스 단위 통신을 담당한다.  
신뢰성, 순서 보장, 흐름 제어 여부가 이 계층에서 결정된다.

- **PDU**: Segment (TCP) / Datagram (UDP)
    
- **주요 프로토콜**: TCP, UDP
    
- **동작 논리**:  
    "이 데이터는 어떤 애플리케이션으로 전달되어야 하며, 신뢰성이 필요한가?"
    
- TCP: 연결 지향, 신뢰성 보장
    
- UDP: 비연결, 속도 우선
    

대부분의 실무 장애는 이 계층과 Application 계층의 경계에서 발생한다.

---

### 3.4 Application 계층

사용자와 직접 상호작용하는 계층이다.  
OSI 모델의 L5~L7이 모두 포함된다.

- **PDU**: Data
    
- **주요 프로토콜**: HTTP, HTTPS, SSH, FTP, DNS, SMTP
    
- **동작 논리**:  
    "사용자는 무엇을 요청했고, 서버는 어떤 응답을 돌려주는가?"
    

TLS, 인증, 인코딩, API 규약 등 **체감되는 대부분의 오류는 이 계층에서 드러난다.**

---

## 4. TCP/IP 기준 실무 트러블슈팅 정리

실무 환경에서는 OSI 7계층을 하나하나 떠올리며 분석하기보다,  
**TCP/IP 모델을 기준으로 통신 흐름을 빠르게 압축해 판단하는 편이 효율적이다.**

TCP/IP는 실제 운영체제와 네트워크 스택이 구현된 구조이기 때문에,  
서버 운영·클라우드 환경에서 발생하는 문제를 **현상 → 원인 계층**으로 바로 연결하기 쉽다.

---

### 4.1 Ping은 되는데 서비스 접속이 안 되는 경우

#### 상황

- `ping`은 정상 응답
    
- `ssh`, `curl`, `telnet` 등 서비스 접속 실패
    

#### 왜 이런 현상이 발생하는가

`ping`은 ICMP 프로토콜을 사용하며,  
이는 **Internet 계층(IP)** 까지의 통신 가능 여부만 확인한다.

즉, 이 상황은 다음을 의미한다.

- 네트워크 인터페이스 정상
    
- IP 주소 설정 및 라우팅 정상
    
- 목적지 서버까지 패킷 전달 가능
    

하지만 `ssh`, `http`와 같은 서비스 접속은  
**Transport 계층(TCP)** 이후의 동작이 필요하다.

#### 따라서 의미하는 바

- Network Interface / Internet 계층은 정상
    
- 문제는 **포트, 세션, 서비스 프로세스**와 관련된 영역에 존재
    

#### 점검 방향이 이렇게 좁혀진다

- 해당 포트가 열려 있는가
    
- 서버에서 해당 포트를 리슨 중인가
    
- 방화벽 또는 보안 그룹이 TCP 연결을 차단하고 있지 않은가
    

---

### 4.2 TCP 3-Way Handshake 실패 유형

TCP 연결은 다음 과정을 거친다.

1. 클라이언트 → SYN
    
2. 서버 → SYN-ACK
    
3. 클라이언트 → ACK
    

이 중 **어디에서 끊겼는지**에 따라 원인이 완전히 달라진다.

---

#### SYN 전송 후 응답이 없는 경우

- 클라이언트가 SYN을 보냈으나 아무 응답도 받지 못함
    

이 경우는 **서버에 도달하지 못했거나, 응답이 중간에서 사라진 상황**이다.

가능한 원인은 다음과 같다.

- 방화벽 DROP 정책
    
- 보안 그룹 인바운드 미허용
    
- NAT 또는 라우팅 경로 문제
    

즉, **Transport 계층 이전(Internet 계층 또는 인프라 정책)**에서 차단된 상태다.

---

#### RST 응답을 받는 경우

- 서버로부터 RST 패킷 수신
    

이는 **서버까지는 정상적으로 도달했음을 의미**한다.  
다만 서버가 해당 포트를 받아줄 준비가 되어 있지 않다는 뜻이다.

주요 원인:

- 서비스 프로세스 미기동
    
- 포트 번호 불일치
    
- 방화벽의 Reject 정책
    

이 경우 문제 범위는 **Transport ~ Application 계층**으로 즉시 좁혀진다.

---

이 구분만으로도  
“네트워크 문제인가, 서버 설정 문제인가”를 빠르게 가를 수 있다.

---

### 4.3 대용량 트래픽에서의 지연 및 끊김

#### 왜 소량 트래픽에서는 멀쩡한가

TCP는 데이터를 한 번에 무한히 보내지 않는다.  
상대가 **얼마나 받을 수 있는지(Window Size)** 를 기준으로 흐름을 제어한다.

소량 요청에서는 이 한계에 도달하지 않기 때문에 문제가 드러나지 않는다.

---

#### 그런데 대용량에서만 문제가 발생하는 이유

다음 구성 요소들이 **각자 다른 기준으로 TCP 세션을 관리**하고 있기 때문이다.

- 클라이언트
    
- 로드밸런서(L4)
    
- 서버(Web/WAS)
    

예를 들어,

- 로드밸런서 Idle Timeout: 60초
    
- 서버 Keep-Alive Timeout: 300초
    

이 경우 로드밸런서는 세션을 종료했지만,  
서버는 여전히 연결이 살아 있다고 착각한다.

그 결과:

- 응답 중간에 연결 끊김
    
- 특정 시점 이후만 장애 발생
    
- 로그는 정상처럼 보임
    

이처럼 **TCP 세션 상태 인식이 어긋난 상황**을  
Transport 계층 설정 불일치라고 한다.

---

### 4.4 DNS 관련 장애는 TCP/IP 어디인가?

#### 흔한 착각

- “DNS는 서버에 도착하기 전에 끝나니까 네트워크 계층 아닌가?”
    

DNS는 실제로 **TCP 또는 UDP 위에서 동작**하지만,  
그 자체는 **이름을 IP로 변환하는 애플리케이션 규칙**이다.

HTTP가 TCP 위에서 동작해도 Application 계층인 것과 동일하다.

---

#### 왜 네트워크 장애처럼 보이는가

- IP 직접 접속 가능
    
- 도메인 접속 실패
    

이 경우 서버와의 통신 자체는 정상이다.

문제는 **이름 → IP 해석 과정**에 있다.

즉,

- Internet / Transport 계층은 정상
    
- DNS 애플리케이션 동작 실패
    

그래서 TCP/IP 관점에서는  
**Application 계층 단독 문제**로 분류한다.

---

## 5. 클라우드 환경에서 TCP/IP 모델 해석

클라우드 환경에서는 TCP/IP 계층 위에  
다음과 같은 인프라 제어 계층이 추가된다.

- 보안 그룹
    
- 네트워크 ACL
    
- NAT Gateway
    
- 로드밸런서
    

이로 인해 **겉으로는 Transport 계층 문제처럼 보이지만**,  
실제 원인은 Internet 계층 또는 인프라 정책인 경우가 많다.

---

실무에서는 다음 순서로 문제를 압축했다.

1. 외부 IP 기준 접근 가능 여부
    
2. NAT 이후 내부 IP 기준 정책 확인
    
3. 포트 및 TCP 세션 상태 점검
    

---

## 6. TCP/IP 계층별 점검 요약

|계층|주요 확인 대상|
|---|---|
|Application|HTTP 응답, 인증, TLS, DNS, API 규약|
|Transport|포트 상태, TCP 세션, 타임아웃|
|Internet|IP 설정, 라우팅, ICMP|
|Network Interface|MAC, ARP, 인터페이스 상태|
