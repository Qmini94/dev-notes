## 1. 개요

본 문서는 Nuxt 기반 프론트엔드 서비스의 운영 안정성과 배포 신뢰성을 확보하기 위해 설계된 CI/CD 파이프라인 구조를 기술한다.  
단순 자동 배포 수준이 아닌, **재현 가능한 빌드(Artifact 기반), 품질 게이트 적용, 승인 기반 배포 통제, 무중단 전환 구조**를 목표로 한다.

본 시스템은 **CI(Continuous Integration)** 와 **CD(Continuous Delivery)** 를 명확히 분리하여 다음을 달성하는 것을 목적으로 한다.

- 코드 품질의 조직 기준 자동 강제
    
- 빌드 결과물의 재현성 확보
    
- 운영 환경 배포 시 인적 실수 최소화
    
- 장애 발생 시 롤백 용이성 확보
    
- 서비스 중단 없는 배포 구조(Blue/Green) 구현
    

---

## 2. 기능 요구사항

### 2.1 코드 품질 자동 검증

코드가 조직의 개발 표준을 준수하는지 자동으로 판단하기 위해 다음 검사를 CI 단계에서 수행한다.

- ESLint 기반 코드 스타일 검사
    
- TypeScript 타입 검사
    
- 하드코딩된 비밀번호 및 Secret 탐지
    
- 취약한 의존성 버전 탐지
    
- 빌드 가능 여부 확인
    

정책 위반 시 빌드는 실패 처리되며, 해당 코드는 운영 배포 대상이 될 수 없다.

---

### 2.2 재현 가능한 빌드(Artifact 기반)

CI 단계에서 생성된 빌드 결과물(`build.tar.gz`)은 배포 가능한 단일 단위로 취급된다.  
CD 단계에서는 소스코드를 다시 빌드하지 않으며, CI에서 생성된 결과물을 그대로 사용한다.

이를 통해 다음을 보장한다.

- 동일 빌드 번호는 항상 동일한 결과물
    
- “빌드 성공”과 “배포 성공” 원인 분리
    
- 롤백 시 이전 Artifact 재사용 가능
    

---

### 2.3 승인 기반 배포 통제

운영 환경 배포는 자동으로 수행되지 않으며, 명시적 승인 단계(input)를 거친다.  
이를 통해 개발 브랜치에서의 빈번한 push가 곧바로 운영 장애로 이어지는 것을 방지한다.

---

### 2.4 무중단 배포 구조

서비스 가용성 유지를 위해 Blue/Green 구조를 사용한다.

- 두 개의 실행 포트 사용
    
- 신규 버전 인스턴스를 비활성 포트에서 먼저 기동
    
- Health Check 통과 후 트래픽 전환
    
- 기존 인스턴스 종료
    

---

## 3. 아키텍처 구성

### 3.1 전체 흐름

`Git Push    ↓ CI Pipeline    - 빌드   - 테스트   - 품질검사   - Artifact 생성    ↓ Jenkins Artifact 저장    ↓ CD Pipeline   - Artifact 다운로드   - 서버 전송   - 무중단 배포 스크립트 실행`

---

## 4. CI 파이프라인 명세

CI는 “코드 품질과 빌드 결과물 보증”을 책임진다.

|단계|설명|
|---|---|
|Checkout|Git 저장소 코드 다운로드|
|Lint|ESLint 기반 코드 규칙 검사|
|Type Check|타입 안정성 검사|
|Security Scan|Secret 하드코딩 및 취약점 검사|
|Build|Nuxt 빌드 수행|
|Artifact Packaging|`build.tar.gz` 생성|
|Archive|Jenkins Artifact 저장|

CI 단계의 목적은 다음 문장으로 정의된다.

> “이 코드가 조직 기준을 통과했으며, 실행 가능한 상태임을 자동 보증한다.”

---

## 5. CD 파이프라인 명세

CD는 “검증된 결과물을 운영 환경에 안전하게 반영”하는 단계이다.

|단계|설명|
|---|---|
|Artifact Fetch|CI에서 생성된 빌드 결과물 다운로드|
|Server Transfer|운영 서버로 Artifact 전송|
|Deploy Script|서버의 `deploy.sh` 실행|
|Health Check|신규 인스턴스 정상 동작 확인|
|Traffic Switch|nginx upstream 전환|
|Old Instance Stop|기존 인스턴스 종료|

---

## 6. 무중단 배포 흐름

1. 현재 활성 인스턴스 확인
    
2. 비활성 인스턴스에 새 빌드 적용
    
3. 신규 인스턴스 기동
    
4. Health Check 반복 수행
    
5. nginx upstream 전환
    
6. 기존 인스턴스 종료
    

Health Check 실패 시 전환은 수행되지 않으며 기존 인스턴스는 유지된다.

---

## 7. 롤백 전략

- Jenkins Artifact 이력 기반으로 이전 빌드 번호 선택 가능
    
- Blue/Green 구조에서는 트래픽 전환만으로 즉시 복구 가능
    
- 운영 서버에는 이전 릴리즈 보관 디렉토리 유지
    

---

## 8. 보안 및 정책 적용

CI 단계에서 다음 정책이 자동 적용된다.

|항목|목적|
|---|---|
|코드 스타일 검사|코드 일관성 유지|
|타입 검사|런타임 오류 감소|
|Secret 검사|보안 사고 방지|
|의존성 취약점 검사|보안 리스크 최소화|

---

## 9. 장애 대응

|상황|대응 방식|
|---|---|
|신규 인스턴스 기동 실패|트래픽 전환 중단|
|Health Check 실패|기존 서비스 유지|
|배포 중 오류|이전 릴리즈로 즉시 복귀|

---

## 10. 트레이드오프

### 장점

- 운영 안정성 향상
    
- 배포 실수로 인한 장애 최소화
    
- 코드 품질 자동 통제
    
- 무중단 배포 가능
    

### 단점

- 초기 설정 복잡도 증가
    
- Jenkins 및 서버 스크립트 관리 필요
    
- 빌드 저장소 관리 비용 발생