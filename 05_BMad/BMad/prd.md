---
stepsCompleted: [step-01-init, step-02-discovery, step-03-success, step-04-journeys, step-05-domain, step-06-innovation, step-07-project-type, step-08-scoping, step-09-functional, step-10-nonfunctional, step-11-polish]
inputDocuments: [product-brief-egov-2026-02-04.md]
workflowType: 'prd'
briefCount: 1
researchCount: 0
brainstormingCount: 0
projectDocsCount: 0
classification:
  projectType: web_app
  domain: govtech
  complexity: high
  projectContext: brownfield
---

# Product Requirements Document - egov 통합 검색 시스템

**Author:** Q
**Date:** 2026-02-04

## Executive Summary

기존 전자정부 CMS(Spring Boot + Nuxt 3)에 Elasticsearch 기반 통합 검색 기능을 추가하는 브라운필드 프로젝트이다.

**핵심 문제:** CMS에 콘텐츠는 존재하지만, 시민과 관리자가 필요한 정보를 찾기 어렵다. 메뉴 구조를 모르면 원하는 정보에 도달할 수 없다.

**해결 방안:** BM25 키워드 기반 통합 검색을 도입하여 게시판 게시글, 페이지 콘텐츠, 메뉴명/경로를 하나의 검색창에서 탐색 가능하게 한다. 사용자 권한과 사이트 정책에 따라 접근 가능한 콘텐츠만 결과에 포함하며, 검색 시스템 장애가 CMS 전체로 확산되지 않는 격리된 아키텍처를 구축한다.

**핵심 차별화:**
- 콘텐츠 유형에 관계없이 하나의 검색으로 통합 탐색
- 권한 기반 필터링으로 비공개 콘텐츠 존재 여부조차 노출 차단
- CMS 도메인 로직과 분리된 데이터 매핑 계층으로 다른 프로젝트에서 재사용 가능
- 검색 장애가 CMS 기본 기능에 영향을 주지 않는 장애 격리 구조

**대상 사용자:** 시민 (정보 탐색), 콘텐츠 작성자 (참고 자료 검색), 사이트 관리자 (콘텐츠 관리), 시스템 운영자 (검색 시스템 검증)

## Success Criteria

### User Success

- **상위 결과 정확도**: 사용자가 찾는 콘텐츠가 상위 5개 결과 안에 포함되는 비율 — MVP 80% 이상, 운영 로그 기반 튜닝으로 점진적 90% 이상 지향
- **클릭 후 도달 성공률**: 검색 결과 클릭 후 추가 탐색 없이 목적 콘텐츠에 도달하는 비율 — MVP 70% 이상, 스니펫 개선·정렬 튜닝으로 점진 향상
- **검색 응답 체감 속도**: 평균 300ms 이하, 최대 1초 이하 — 사용자가 지연을 체감하지 않는 수준
- **탐색 방식 전환**: 메뉴 탐색 대비 검색을 주요 탐색 수단으로 사용하는 비율 증가

### Business Success

**3개월 이내:**
- 메뉴 기반 탐색 대비 검색 사용 비율 증가
- 관리자 콘텐츠 검색 및 관리 작업 시간 단축
- 검색 사용 로그 수집 체계 확립

**12개월 이내:**
- 시민 사용자의 정보 탐색 실패율 감소
- 반복 문의 또는 유사 민원 감소
- 콘텐츠 재사용 및 참조율 증가
- 검색 로그 기반 개선 체계 정착

### Technical Success

| 지표 | 목표 |
|------|------|
| 평균 검색 응답 시간 | 300ms 이하 |
| 최대 검색 응답 시간 | 1초 이하 |
| 색인 반영 지연 | 콘텐츠 변경 후 5분 이내 |
| 검색 커버리지 | 검색 대상 콘텐츠 전량 인덱스 포함 |
| 권한 정확도 | 접근 불가 콘텐츠 노출 차단 100% |

**시스템 설계 지표:**
- **모듈 독립성**: 독립 모듈 구조, 다른 프로젝트에서 재사용 가능
- **낮은 시스템 종속성**: 데이터 매핑 계층만 교체하면 다른 시스템 적용 가능
- **운영 편의성**: 색인 상태, 검색 성능, 에러 로그 모니터링 가능
- **확장 가능성**: 도메인 추가, 검색 대상 확장이 구조 변경 없이 점진적 가능
- **장애 격리**: 검색 시스템 장애가 CMS 전체 장애로 확산되지 않는 구조
- **유지보수 용이성**: 색인 파이프라인, 검색 API, 권한 필터링 로직 명확 분리

## Product Scope

### MVP - Minimum Viable Product

**목적:** CMS 전역에서 동작하는 안정적인 통합 검색 기반 구축

- BM25 기반 키워드 통합 검색 (게시판 게시글, 페이지 콘텐츠, 메뉴명/메뉴 경로)
- 권한 기반 필터링 (사용자 권한, 사이트 정책, 공개/비공개 상태 → 접근 불가 콘텐츠 완전 제외)
- 검색 범위 제어 (전체 사이트 기본, 사이트 단위/콘텐츠 유형별 필터)
- 정렬: 정확도순 기본, 최신순 옵션
- 확장 가능한 검색 아키텍처 (공통 인덱스 모델, 데이터 매핑 계층 분리)
- KWCAG 준수 검색 UI

> MVP 상세 기능 목록과 Must-Have 판정 근거는 "Project Scoping & Phased Development" 섹션 참조.

### Growth Features (Post-MVP)

**1순위: 검색 품질 고도화**
- 검색 로그 기반 랭킹 튜닝
- 동의어 사전 적용
- 오타 교정 및 유사어 처리

**2순위: 시맨틱 검색 도입**
- 벡터 기반 의미 유사도 검색 + 키워드 검색 결합 (하이브리드)
- 복합 질의 의도 대응

**3순위: 검색 대상 확장**
- 첨부파일 내부 텍스트 색인
- 추가 도메인 (조직, 회원 등) 검색 대상 확대

**4순위: 운영 도구**
- 자동완성/실시간 검색 제안
- 검색 로그 분석 대시보드
- 검색 품질 모니터링 지표 시각화

### Vision (Future)

- 외부 시스템 API 기반 검색 연동
- 검색 대상 도메인 관리 UI (관리자 직접 설정)
- 게시판 단위 필터 확장
- 검색 로그 기반 자동 개선 체계 (인기 검색어, 검색 실패 분석)
- 다른 전자정부 프로젝트에서 검색 모듈 재사용

## User Journeys

### Journey 1: 시민 사용자 — 성공 경로

**페르소나: 김민수 (38세, 일반 시민)**

김민수 씨는 소규모 사업장을 운영하는 자영업자다. 지방자치단체에서 운영하는 소상공인 지원 사업에 대해 들었지만, 정확한 사업명이나 담당 부서를 모른다.

**Opening Scene:** 김민수 씨는 브라우저에서 시청 홈페이지에 접속한다. 메뉴 구조를 살펴보지만 "경제", "산업", "복지" 중 어디에 해당하는지 알 수 없다. 상단의 검색창이 눈에 띈다.

**Rising Action:** "소상공인 지원"이라고 입력하고 검색 버튼을 누른다. 검색 결과가 즉시 표시된다. 결과 목록에는 게시판 공지, 페이지 콘텐츠, 관련 메뉴 경로가 함께 나타난다. 각 결과에는 제목, 요약 스니펫, 콘텐츠 유형, 소속 사이트가 표시되어 어떤 정보인지 한눈에 파악 가능하다. "게시판" 필터를 선택해 공지사항만 좁혀본다.

**Climax:** 상위 두 번째 결과에서 "2026년 소상공인 경영안정자금 지원 안내" 공지를 발견한다. 클릭하면 해당 게시글로 바로 이동하여 지원 대상, 신청 방법, 제출 서류, 접수 기간을 확인한다. 첨부된 신청서 양식도 함께 다운로드한다.

**Resolution:** 김민수 씨는 메뉴 구조를 전혀 모르는 상태에서 검색 한 번으로 필요한 정보에 도달했다.

**드러난 요구사항:** 통합 검색 결과에 유형·사이트·스니펫 표시, 유형별 필터, 원본 직접 이동, 즉시 응답

---

### Journey 2: 시민 사용자 — 엣지 케이스 (검색 실패 및 재탐색)

**페르소나: 이영희 (55세, 퇴직 예정자)**

이영희 씨는 퇴직 후 재취업 지원 프로그램을 찾고 있다. 정확한 용어를 모르고 막연한 키워드로 검색을 시도한다.

**Opening Scene:** 이영희 씨는 "퇴직 후 일자리"로 검색한다. 결과가 나오지만, 원하는 재취업 지원 프로그램이 상위에 보이지 않는다. 관련 없는 일반 고용 통계 페이지가 먼저 나온다.

**Rising Action:** 검색어를 "재취업 지원"으로 바꿔 다시 검색한다. 이번에는 "중장년 재취업 지원 사업 안내" 공지가 상위 결과에 나타난다. 사이트 필터를 이용해 "고용지원센터" 사이트로 범위를 좁혀보니 관련 결과가 더 집중적으로 표시된다.

**Climax:** "중장년 재취업 지원 사업 안내" 게시글을 클릭하여 프로그램 상세 정보, 신청 자격, 교육 일정을 확인한다.

**Resolution:** 첫 검색에서 원하는 결과를 바로 찾지 못했지만, 검색어를 변경하고 사이트 필터를 활용하여 두 번째 시도에서 목적 정보에 도달했다.

**드러난 요구사항:** 검색 실패 시 안내 메시지, 사이트별 필터, 정렬 전환, (Growth) 오타 교정·동의어·유사어 제안

---

### Journey 3: 콘텐츠 작성자 / 사이트 관리자 — 관리 목적 검색

**페르소나: 박지현 (32세, 콘텐츠 담당자)**

박지현 씨는 A사이트의 콘텐츠 담당자다. 올해 작성해야 하는 "2026년 예산 공개" 게시글을 위해 작년에 작성된 유사 게시글을 참고하려 한다.

**Opening Scene:** 박지현 씨는 관리자 화면에서 검색창에 "예산 공개"를 입력한다. 사이트 필터를 "A사이트"로 설정한다.

**Rising Action:** "게시판" 유형으로 필터링하니 과거 예산 관련 게시글 목록이 나타난다. 최신순으로 정렬을 변경하여 "2025년도 예산 공개 안내" 게시글을 발견한다.

**Climax:** 해당 게시글을 참고하여 올해 버전을 작성한다. 사이트 필터를 해제하고 전체 검색으로 B사이트의 유사 게시글도 함께 참고한다.

**Resolution:** 검색과 필터 조합으로 필요한 참고 자료를 빠르게 찾고, 다른 사이트의 사례까지 비교할 수 있었다.

**드러난 요구사항:** 관리 화면 검색 접근, 사이트+유형 필터 조합, 최신순 정렬, 편집 화면 연결, 권한 범위 내 콘텐츠만 노출

---

### Journey 4: 시스템 관리자 / 운영자 — 검색 시스템 검증

**페르소나: 최동훈 (40세, 시스템 운영 담당)**

최동훈 씨는 CMS 전체를 운영하는 시스템 관리자다. 새로운 사이트가 추가되었고, 해당 사이트의 콘텐츠가 검색에 정상 반영되는지 확인해야 한다.

**Opening Scene:** 새로 추가된 C사이트에 테스트 게시글을 등록한 뒤, 고유 키워드로 검색한다.

**Rising Action:** 검색 결과에 해당 게시글이 나타나지 않는다. 색인 반영 지연을 고려하여 잠시 후 다시 검색하니 정상 노출된다. 비공개로 설정한 테스트 게시글이 일반 사용자 검색에서 노출되지 않는지 확인하기 위해, 권한이 없는 계정으로 동일 검색을 수행한다.

**Climax:** 비공개 게시글이 일반 사용자 검색 결과에서 완전히 제외되어 있음을 확인한다.

**Resolution:** 신규 사이트 추가 후 검색 색인 반영과 권한 필터링이 정상 동작함을 검증했다.

**드러난 요구사항:** 색인 반영 확인 (수 분 이내), 권한 필터링 검증, 신규 사이트 자동 대응, (Growth) 모니터링 도구

---

### Journey Requirements Summary

| 여정 | 드러난 핵심 요구사항 |
|------|----------------------|
| 시민 성공 경로 | 통합 검색, 스니펫, 유형 필터, 직접 이동, 즉시 응답 |
| 시민 엣지 케이스 | 검색 실패 안내, 사이트 필터, 정렬 전환, (Growth) 오타/동의어 |
| 관리자 검색 | 관리 화면 검색, 필터 조합, 최신순 정렬, 편집 연결, 권한 범위 노출 |
| 운영자 검증 | 색인 반영 확인, 권한 검증, 자동 대응, (Growth) 모니터링 도구 |

## Domain-Specific Requirements

### Compliance & Regulatory

**보안 경계:**
- 검색 시스템은 CMS의 일부 기능으로 간주하며, 기존 CMS 보안 경계 안에 포함
- 검색 API는 CMS 내부 API와 동일한 인증 체계(JWT + Redis 세션) 기반으로 보호
- 검색 시스템의 운영 및 관리 기능은 기존 관리자 권한 체계에 포함

**Elasticsearch 보안:**
- ES는 외부 공개 금지: 내부망/VPC 또는 온프레미스 내부 네트워크에만 배치, 백엔드만 접근
- ES 접근은 TLS 적용 + 인증(API Key 또는 Basic + IP allowlist) + 최소 권한(RBAC)

**웹 접근성:**
- 검색 UI는 KWCAG 2.2 기준 준수
- 키보드 네비게이션, 스크린리더 대응, 포커스 이동, 필터/정렬 UI 접근성

**개인정보 보호:**
- 일반 사용자 검색 로그는 통계 목적 범위 내에서만 활용, 개인정보 최소화 원칙(PII 미저장)
- 검색 로그 접근 통제 + 보관기간 정책 명시
- 감사 로그, 검색어 로그, 색인 로그 분리 저장

### Technical Constraints

**데이터 정의 및 동기화:**
- 검색 인덱스는 원본 CMS 데이터의 파생 데이터로 정의 (독립 데이터 저장소 아님)
- 검색 인덱스에 저장되는 데이터는 원본 콘텐츠와 동일한 민감도 등급
- 원본 콘텐츠 삭제 시 검색 인덱스에서 자동 제거 (또는 soft-delete 플래그 후 배치 정리)
- 콘텐츠 비공개 전환/권한 변경 시 인덱스에서도 즉시 또는 수 분 내 반영
- 인덱스 반영 지연이 발생해도 결과 노출이 생기지 않도록 "검색 시점 필터링"을 안전장치로 적용
- 데이터 보존 정책은 CMS 원본 데이터 정책을 그대로 따름

**권한 보안:**
- 권한이 없는 사용자는 검색을 통해 비공개 정보의 존재 여부조차 추론 불가
- 검색 결과는 실제 접근 가능한 정보 범위와 100% 일치
- 사용자/사이트 정책에 따라 결과 필터링 강제

**가용성 및 장애 격리:**
- 검색 장애 발생 시에도 CMS 기본 기능 정상 동작 (장애 격리 필수)
- 검색 불가 시 검색 UI는 "일시적으로 검색을 사용할 수 없습니다" graceful fail 처리
- 평시 가용성 목표: 월 99.9% 지향
- MVP 우선: 장애 격리 + 빠른 복구 + 원인 추적 가능(로그/메트릭)
- 인덱싱은 재처리 가능(재색인/리플레이), 장애 후 정합성 복구 절차 문서화

### Risk Mitigations

**감사 추적:**
- MVP 최소 범위: 관리자 설정 변경에 대한 감사 로그
  - 대상: 검색 대상 도메인, 수집 쿼리, 인덱싱 설정, 권한 정책 변경
  - 기록 항목: 변경 주체(userId), 변경 전/후 요약, 변경 시각, 대상(site/domain/index)
- 일반 사용자 검색어 로그는 감사 로그와 분리 저장

**데이터 일관성 리스크:**
- 원본-인덱스 간 불일치 방지를 위한 동기화 메커니즘 필요
- 삭제/비공개 전환 시 인덱스 반영 지연으로 인한 일시적 노출 방지: 검색 시점 필터링 안전장치
- 장애 후 정합성 복구를 위한 재색인/리플레이 기능

## Web App Specific Requirements

### Project-Type Overview

egov 통합 검색 시스템은 기존 Nuxt 3 SSR 기반 CMS 위에 검색 기능을 추가하는 브라운필드 웹 애플리케이션 프로젝트이다. 검색 결과 영역은 CSR로 동작하며, 기존 CMS 페이지 구조(SSR) 안에서 인터랙션 중심 기능 영역으로 구현된다.

### Technical Architecture Considerations

**렌더링 방식:**
- 검색 결과 페이지는 CSR 기반으로 처리
- SSR은 기존 CMS 페이지 구조 유지, 검색 결과 영역은 CSR 데이터 페칭으로 구성
- Nuxt SSR 앱 안의 "CSR 기능 영역"으로 구현

**브라우저 지원:**

| 브라우저 | 지원 범위 |
|----------|-----------|
| Chrome | 최신 + 최근 2개 메이저 버전 |
| Edge | 최신 + 최근 2개 메이저 버전 |
| Safari | 최신 + 최근 2개 메이저 버전 |
| Firefox | 최신 + 최근 2개 메이저 버전 |
| IE 계열 | 미지원 |

- ES6+, fetch, modern JS 기반 구현 전제

**SEO:**
- 검색 결과 페이지는 SEO 대상 아님 — robots noindex 처리
- SEO는 콘텐츠 원본 페이지에서 담당

**반응형 디자인:**
- 필수: 모바일, 태블릿, 데스크톱에서 동일하게 동작
- 시민 사용자의 모바일 비중이 높을 가능성 고려
- 검색 입력, 필터, 결과 목록 모두 반응형 레이아웃 적용

## Project Scoping & Phased Development

### MVP Strategy & Philosophy

**MVP 접근법:** 문제 해결 MVP (Problem-Solving MVP)

사용자의 핵심 불편("메뉴를 하나씩 열어봐야 한다")을 직접 해결하는 것이 가치의 본질이다. "검색하면 찾을 수 있다"는 단일 약속을 이행하는 것이 MVP의 목표이며, 플랫폼이나 수익 모델이 아닌 문제 해결에 집중한다.

**리소스 요구사항:**
- 최소 구성: 백엔드 1명(ES 연동+API) + 프론트엔드 1명(검색 UI) + DevOps 부분 참여(ES 인프라)
- 축소 가능: 감사 로그를 단순 파일 로깅으로 시작, 모니터링을 ES 기본 도구(Kibana)로 대체
- 불가 축소: 권한 필터링, 장애 격리 — 어떤 리소스 상황에서도 생략 불가

### MVP Feature Set (Phase 1)

**"검색하면 찾을 수 있다"**

**지원하는 핵심 여정:**
- Journey 1: 시민 성공 경로 (키워드 검색 → 결과 도달)
- Journey 2: 시민 엣지 케이스 (재검색, 필터 활용)
- Journey 3: 관리자 검색 (사이트/유형 필터 조합)
- Journey 4: 운영자 기본 검증 (색인 반영, 권한 동작 확인)

**Must-Have 기능:**

| 기능 | 근거 |
|------|------|
| BM25 키워드 검색 | 핵심 기능. 이것 없이는 제품 존재 의미 없음 |
| 권한 기반 필터링 | GovTech 필수. 없으면 보안 사고 → 프로젝트 중단 |
| 공통 인덱스 모델 + 데이터 매핑 계층 | 게시글·페이지·메뉴 통합 검색의 전제 조건 |
| 사이트별/유형별 필터 | Journey 1-3 모두에서 핵심 상호작용 |
| 정렬 (정확도순/최신순) | 관리자 여정에서 필수, 시민 여정에서도 유용 |
| 스니펫 표시 | 결과 클릭 전 판단 근거 — 클릭 후 도달률 70% 달성의 전제 |
| 장애 격리 (Graceful fail) | CMS 운영 안정성 — 검색 장애가 전체 장애로 확산 방지 |
| 검색 시점 필터링 안전장치 | 인덱스 동기화 지연 시에도 권한 보안 유지 |
| 반응형 UI | 시민 모바일 사용 비중 → 필수 |
| KWCAG 접근성 | GovTech 규정 — 법적 요구사항 |

**MVP 상세 구현 범위:**
- Elasticsearch 도입 + CMS 연동 (Spring Boot 백엔드)
- 공통 인덱스 모델 설계 및 데이터 매핑 계층 구현
- 게시판 게시글, 페이지 콘텐츠, 메뉴명/경로 인덱싱
- BM25 키워드 검색 API
- JWT+Redis 기반 권한 필터링 + 검색 시점 안전장치
- 검색 결과: 제목, 스니펫, 유형, 사이트, 원본 링크
- 사이트별/유형별 필터, 정확도순/최신순 정렬
- CSR 검색 UI (Nuxt 3 내), 반응형, KWCAG 준수
- Graceful fail (검색 장애 시 안내 메시지)
- 관리자 설정 변경 감사 로그 (기록만, UI 없음)
- 검색어 로그 수집 (통계용, PII 미포함)
- 콘텐츠 변경/삭제 시 인덱스 자동 동기화

### Post-MVP Features

**Phase 2 — Growth: "더 정확하고, 더 넓게"**

1순위 — 검색 품질 고도화:
- 검색 로그 기반 랭킹 튜닝
- 동의어 사전 적용
- 오타 교정 및 유사어 처리

2순위 — 시맨틱 검색 도입:
- 벡터 기반 의미 유사도 검색 + 키워드 검색 결합 (BM25 + kNN 하이브리드)
- 복합 질의 의도 대응

3순위 — 검색 대상 확장:
- 첨부파일 내부 텍스트 색인
- 추가 도메인 (조직, 회원 등) 검색 대상 확대

4순위 — 운영 도구:
- 자동완성/실시간 검색 제안
- 색인 상태 모니터링 도구
- 검색 로그 분석 대시보드
- 감사 로그 조회 UI

**Phase 3 — Vision: "플랫폼으로"**

- 외부 시스템 API 기반 검색 연동
- 검색 대상 도메인 관리 UI (관리자 직접 설정)
- 게시판 단위 필터 확장
- 검색 로그 기반 자동 개선 체계 (인기 검색어, 검색 실패 분석)
- 다른 전자정부 프로젝트에서 검색 모듈 재사용

### Risk Mitigation Strategy

**기술 리스크:**
- 가장 도전적인 부분: CMS 권한 체계와 검색 인덱스 간 실시간 동기화
- 완화 전략: 검색 시점 필터링을 안전장치로 이중 적용. 인덱스는 캐시 역할, 최종 권한 판단은 검색 시점에 수행
- 가장 위험한 가정: 30종 이상 게시판 유형이 공통 인덱스 모델로 일관되게 매핑 가능하다는 가정 → 조기 프로토타이핑으로 검증 필요

**시장 리스크 (공공 도메인):**
- 가장 큰 리스크: 시민 사용자의 검색 사용 자체가 저조할 가능성 (기존 메뉴 탐색 습관)
- MVP 대응: 검색어 로그 수집으로 실제 사용 패턴 조기 파악 → Growth 방향 결정 근거
- 필요한 학습: MVP 배포 후 검색 사용률, 검색 실패율, 재검색 패턴 데이터 수집

**리소스 리스크:**
- 최소 구성: 백엔드 1명 + 프론트엔드 1명 + DevOps 부분 참여
- 축소 가능: 감사 로그 → 단순 파일 로깅, 모니터링 → ES 기본 도구(Kibana)
- 불가 축소: 권한 필터링, 장애 격리 — 어떤 상황에서도 생략 불가

## Functional Requirements

### 검색 실행 (Search Execution)

- **FR1:** 사용자는 키워드를 입력하여 CMS 전체(게시판 게시글, 페이지 콘텐츠, 메뉴명/메뉴 경로)를 대상으로 통합 검색을 실행할 수 있다
- **FR2:** 사용자는 검색을 실행하면 관련도 기반(BM25) 순위의 결과 목록을 받을 수 있다
- **FR3:** 사용자는 빈 검색어 또는 유효하지 않은 입력에 대해 안내 메시지를 받을 수 있다
- **FR4:** 사용자는 검색 결과가 없을 때 재검색을 유도하는 안내를 받을 수 있다

### 검색 결과 표시 (Search Results Display)

- **FR5:** 사용자는 각 검색 결과에서 제목, 요약 스니펫, 콘텐츠 유형, 소속 사이트 정보를 확인할 수 있다
- **FR6:** 사용자는 검색 결과를 클릭하여 원본 콘텐츠 페이지로 직접 이동할 수 있다
- **FR7:** 사용자는 검색 결과를 페이지네이션으로 탐색할 수 있다
- **FR8:** 관리자는 검색 결과에서 해당 콘텐츠의 관리 화면(편집 등)으로 연결할 수 있다

### 검색 결과 필터링 및 정렬 (Filtering & Sorting)

- **FR9:** 사용자는 검색 결과를 사이트별로 필터링할 수 있다
- **FR10:** 사용자는 검색 결과를 콘텐츠 유형별(게시글, 페이지, 메뉴)로 필터링할 수 있다
- **FR11:** 사용자는 사이트 필터와 유형 필터를 조합하여 결과를 좁힐 수 있다
- **FR12:** 사용자는 검색 결과를 정확도순(기본) 또는 최신순으로 정렬을 전환할 수 있다

### 권한 및 접근 제어 (Permission & Access Control)

- **FR13:** 시스템은 사용자의 인증 상태와 권한에 따라 접근 가능한 콘텐츠만 검색 결과에 포함한다
- **FR14:** 시스템은 권한이 없는 사용자에게 비공개 콘텐츠의 존재 여부를 노출하지 않는다
- **FR15:** 시스템은 사이트 정책(공개/비공개, IP 접근 제한 등)에 따라 검색 결과를 필터링한다
- **FR16:** 시스템은 인덱스 동기화 지연이 발생해도 검색 시점에 권한을 재확인하여 미인가 콘텐츠 노출을 방지한다
- **FR17:** 검색 API는 기존 CMS와 동일한 인증 체계를 통해 보호된다

### 데이터 인덱싱 및 동기화 (Data Indexing & Synchronization)

- **FR18:** 시스템은 게시판 게시글을 검색 인덱스에 수집하고 유지한다
- **FR19:** 시스템은 페이지 콘텐츠를 검색 인덱스에 수집하고 유지한다
- **FR20:** 시스템은 메뉴명 및 메뉴 경로를 검색 인덱스에 수집하고 유지한다
- **FR21:** 시스템은 콘텐츠가 생성·수정·삭제될 때 검색 인덱스에 변경 사항을 반영한다
- **FR22:** 시스템은 콘텐츠의 공개/비공개 상태 또는 권한이 변경될 때 인덱스에 반영한다
- **FR23:** 시스템은 신규 사이트가 추가될 때 해당 사이트의 콘텐츠를 자동으로 검색 대상에 포함한다
- **FR24:** 운영자는 전체 또는 부분 재색인을 수동으로 트리거하여 인덱스 정합성을 복구할 수 있다
- **FR25:** 시스템은 데이터 정합성 확보를 위해 주기적인 전체 재수집 및 재색인 작업을 실행할 수 있다
- **FR26:** 시스템은 재색인 작업 중에도 CMS 핵심 서비스가 중단되지 않는다
- **FR27:** 시스템은 색인 대상 데이터와 검색 인덱스 간 불일치를 감지하고 복구할 수 있다
- **FR28:** 시스템은 색인 작업의 성공/실패 여부를 기록하고 운영자가 확인할 수 있다
- **FR29:** 시스템은 색인 작업 실패 시 재시도 또는 복구 절차를 수행할 수 있다
- **FR30:** 시스템은 검색 인덱스 데이터 보관 정책이 원본 콘텐츠의 삭제 및 상태 변경과 동기화된다

### 검색 UI 및 접근성 (Search UI & Accessibility)

- **FR31:** 사용자는 CMS의 모든 페이지에서 검색 기능에 접근할 수 있다
- **FR32:** 사용자는 모바일, 태블릿, 데스크톱 환경에서 동일한 검색 기능을 이용할 수 있다
- **FR33:** 사용자는 키보드만으로 검색 입력, 결과 탐색, 필터 조작, 정렬 변경을 수행할 수 있다
- **FR34:** 스크린리더 사용자는 검색 결과, 필터 상태, 정렬 상태를 인식할 수 있다
- **FR35:** 시스템은 검색 결과 페이지에 검색 엔진 인덱싱 제외(noindex) 처리를 적용한다

### 운영 및 모니터링 (Operations & Monitoring)

- **FR36:** 시스템은 검색 서비스 장애 시에도 CMS 기본 기능이 정상 동작하도록 장애를 격리한다
- **FR37:** 시스템은 검색 서비스와 CMS 서비스 간 의존성을 최소화하여 장애 확산을 방지한다
- **FR38:** 시스템은 검색 서비스 불가 시 사용자에게 안내 메시지를 표시한다
- **FR39:** 시스템은 관리자의 검색 관련 설정 변경(검색 대상 모델, 색인 정책, 권한 정책, 인덱스 구조)에 대한 감사 로그를 기록한다
- **FR40:** 시스템은 검색어 로그를 수집한다 (통계 목적, 개인 식별 정보 미포함)
- **FR41:** 시스템은 검색 로그, 감사 로그, 색인 로그를 서로 분리하여 관리한다
- **FR42:** 시스템은 검색어 로그에 대한 접근 통제 및 보관 기간 정책을 적용한다

### 확장성 및 재사용성 (Extensibility & Reusability)

- **FR43:** 시스템은 게시글·페이지·메뉴 외의 새로운 도메인 데이터를 검색 대상으로 확장할 수 있다
- **FR44:** 관리자는 검색 대상이 되는 데이터 유형 및 수집 기준을 설정 또는 확장할 수 있다
- **FR45:** 검색 인덱스 구조 또는 검색 대상 데이터 모델 변경이 기존 CMS 핵심 기능에 영향을 주지 않는다
- **FR46:** 검색 API는 내부 UI뿐 아니라 외부 시스템 또는 다른 CMS 모듈에서도 사용할 수 있다

## Non-Functional Requirements

### Performance (성능)

| 지표 | 기준 |
|------|------|
| 검색 API 평균 응답 시간 | 300ms 이하 |
| 검색 API 최대 응답 시간 (P99) | 1초 이하 |
| 검색 결과 UI 렌더링 | API 응답 후 100ms 이내 화면 갱신 |
| 인덱스 반영 지연 | 콘텐츠 변경 후 5분 이내 검색 가능 |
| 동시 검색 사용자 | 최소 50명 동시 검색 시 응답 시간 기준 유지 |
| 검색 결과 페이지네이션 | 다음 페이지 로드 시 동일 응답 시간 기준 |

### Security (보안)

| 항목 | 기준 |
|------|------|
| Elasticsearch 네트워크 접근 | 내부망/VPC 전용, 외부 직접 접근 차단 |
| ES 통신 암호화 | TLS 적용 필수 |
| ES 인증/인가 | API Key 또는 Basic 인증 + IP allowlist + RBAC (최소 권한 원칙) |
| 검색 API 인증 | CMS와 동일한 JWT + Redis 세션 기반 |
| 권한 필터링 정확도 | 접근 불가 콘텐츠 노출 차단 100% — 존재 여부 유추도 불가 |
| 검색 로그 PII | 개인 식별 정보 미저장, 통계 목적 최소 데이터만 수집 |
| 감사 로그 무결성 | 기록 후 변경/삭제 불가, 보관 기간 정책 적용 |
| 입력 검증 | 검색 쿼리에 대한 XSS, 인젝션 방지 (기존 CMS 보안 유틸리티 활용) |

### Scalability (확장성)

| 항목 | 기준 |
|------|------|
| 인덱스 데이터 규모 | 초기 10만 건 이상, 100만 건까지 성능 저하 없이 확장 가능 |
| 사이트 수 | 신규 사이트 추가 시 인덱싱 자동 확장, 재배포 불필요 |
| 검색 대상 도메인 | 새로운 콘텐츠 유형 추가 시 인덱스 구조 변경 최소화 |
| 재색인 | 전체 재색인 시 서비스 중단 없이 수행 가능 |

### Accessibility (접근성)

| 항목 | 기준 |
|------|------|
| 웹 접근성 표준 | KWCAG 2.2 기준 준수 |
| 키보드 접근성 | 검색 입력, 결과 탐색, 필터/정렬 조작 전체 키보드 운용 가능 |
| 스크린리더 호환 | 검색 결과 수, 필터 상태, 정렬 상태, 현재 페이지 정보 음성 전달 |
| 포커스 관리 | 검색 실행 후 결과 영역으로 포커스 이동, 필터 변경 후 결과 갱신 시 포커스 유지 |
| 색상 대비 | WCAG AA 기준 (4.5:1) 이상 |
| 반응형 텍스트 | 200%까지 텍스트 확대 시 레이아웃 깨짐 없음 |

### Integration (연동)

| 항목 | 기준 |
|------|------|
| CMS 데이터 동기화 | 콘텐츠 CRUD 이벤트 기반 실시간 반영 + 주기적 전체 동기화 |
| 인증 체계 통합 | 기존 CMS JWT + Redis 세션을 그대로 사용, 별도 인증 체계 도입 금지 |
| API 호환성 | RESTful API, JSON 응답 형식, 기존 CMS API 패턴과 일관성 유지 |
| ES 버전 호환 | Elasticsearch 7.x 또는 8.x (또는 OpenSearch 2.x) 지원 |
| 데이터 매핑 계층 분리 | CMS 도메인 엔티티와 검색 인덱스 모델 간 명확한 매핑 계층 존재 |

### Reliability (신뢰성)

| 항목 | 기준 |
|------|------|
| 검색 서비스 가용성 | 월 99.9% 지향 (월 43분 이내 다운타임) |
| 장애 격리 | 검색 서비스 장애 시 CMS 핵심 기능 100% 정상 동작 |
| Graceful degradation | 검색 불가 시 5초 이내 안내 메시지 표시, 사용자 대기 최소화 |
| 데이터 정합성 복구 | 장애 후 전체 재색인으로 정합성 복구 가능 |
| 색인 작업 실패 복구 | 실패한 색인 작업 자동 재시도 (최대 3회), 이후 로그 기록 및 운영자 알림 |
| 로그/메트릭 추적 | 장애 원인 추적을 위한 구조화된 로그 및 기본 메트릭 수집 |
