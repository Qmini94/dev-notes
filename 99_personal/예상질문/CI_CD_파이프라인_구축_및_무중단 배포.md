## Q1. Jenkins 파이프라인을 백엔드와 프론트엔드로 분리한 이유는 무엇인가요?

백엔드와 프론트엔드는 빌드 방식, 배포 대상, 롤백 단위가 서로 다르기 때문에 파이프라인을 분리했습니다. 백엔드는 Spring 기반으로 JAR를 빌드해서 서버에 배포하고, 프론트엔드는 정적 리소스를 빌드해서 별도 경로에 배포하는 구조입니다. 하나로 묶으면 한쪽만 수정해도 전체를 다시 빌드하고 배포해야 하니까 불필요한 리스크가 생깁니다. 분리하면 각각 독립적으로 빌드하고 검증하고 배포할 수 있어서, 배포 빈도를 높이면서도 장애 범위를 최소화할 수 있었습니다.

---

## Q2. CI와 CD를 별도 파이프라인으로 분리했다고 했는데, 구체적으로 어떤 흐름인가요?

CI 파이프라인에서는 코드 체크아웃, 빌드, 아카이빙까지 수행합니다. 빌드된 아티팩트는 지정된 디렉토리에 버전별로 보관되고, 이 단계에서 빌드 성공 여부를 먼저 확인합니다. CD 파이프라인은 그 아티팩트를 기반으로 실제 서버에 배포하는 단계인데, 승인 절차를 거친 뒤에 실행됩니다. 이렇게 분리한 이유는 빌드와 배포의 책임을 명확히 나누고, 검증되지 않은 아티팩트가 운영에 반영되는 걸 원천적으로 막기 위해서입니다.

---

## Q3. Blue/Green 배포의 동작 방식을 구체적으로 설명해 주세요.

현재 운영 중인 포트를 Blue, 새로 배포할 포트를 Green으로 정의합니다. CD 파이프라인이 실행되면 Green 포트에 새 버전을 기동하고, 헬스체크로 정상 구동을 확인합니다. 정상이면 Nginx의 upstream 설정을 Green 포트로 전환하고 reload해서 트래픽을 새 버전으로 보냅니다. 전환이 끝나면 기존 Blue 포트의 프로세스를 종료합니다. 이 과정에서 사용자 요청이 끊기는 구간 없이 전환되기 때문에 무중단 배포가 가능합니다.

---

## Q4. 배포 실패 시 롤백은 어떻게 처리하나요?

배포할 때 이전 릴리스 디렉토리를 별도로 보존하는 구조를 채택했습니다. Green 포트에 새 버전을 기동한 뒤 헬스체크에서 실패하면, Nginx 전환을 수행하지 않기 때문에 기존 Blue 포트가 그대로 트래픽을 처리합니다. 전환 전에 실패하면 자연스럽게 롤백 상태가 유지되는 셈입니다. 만약 전환 이후에 문제가 발견되면, 보존해둔 이전 아티팩트를 바로 재기동하고 Nginx를 다시 전환해서 빠르게 복구할 수 있습니다. 별도의 복잡한 롤백 스크립트 없이도 디렉토리 구조만으로 즉시 롤백이 가능하도록 설계했습니다.

---

## Q5. Blue/Green 외에 Canary, Rolling 같은 다른 배포 전략은 검토하지 않았나요?

검토는 했지만, 프로젝트 환경에 Blue/Green이 가장 적합하다고 판단했습니다. Canary 배포는 트래픽을 비율로 나눠서 점진적으로 검증하는 방식인데, 로드밸런서 수준의 트래픽 제어와 모니터링 인프라가 필요합니다. Rolling 배포는 여러 인스턴스를 순차적으로 교체하는 방식이지만, 당시 단일 서버 환경이었기 때문에 적용이 어려웠습니다. Blue/Green은 단일 서버에서도 포트 기반으로 구현할 수 있고, 전환과 롤백이 명확해서 운영 복잡도를 낮추면서도 무중단을 달성할 수 있었습니다.

---

## Q6. 헬스체크는 어떤 방식으로 구현했나요?

Green 포트에 애플리케이션을 기동한 뒤, 헬스체크 엔드포인트에 HTTP 요청을 반복해서 보내는 방식입니다. 일정 횟수 안에 200 응답을 받으면 정상으로 판단하고, 제한 시간 내에 응답이 없으면 배포 실패로 처리합니다. Spring Boot Actuator의 health 엔드포인트를 활용하면 DB 연결 같은 주요 의존성까지 포함해서 상태를 확인할 수 있어서, 단순히 프로세스가 떴는지가 아니라 실제로 서비스 가능한 상태인지를 검증할 수 있었습니다.

---

## Q7. Jenkins 파이프라인에서 승인 절차는 어떻게 구현했나요?

Jenkins의 input 스텝을 활용해서 CD 파이프라인 실행 중에 수동 승인 단계를 넣었습니다. CI에서 빌드와 아카이빙이 완료된 뒤 CD를 실행하면, 배포 전에 승인 대기 상태가 됩니다. 담당자가 빌드 결과를 확인하고 승인 버튼을 누르면 이후 단계가 진행됩니다. 자동화의 효율성은 유지하면서도 운영 배포에 대한 통제력을 확보해서, 실수로 인한 장애를 예방할 수 있었습니다.

---

## Q8. 이 구조에서 개선하고 싶은 점이 있다면 무엇인가요?

두 가지를 개선하고 싶습니다. 첫째, 현재는 헬스체크가 단순 HTTP 응답 확인 수준인데, 배포 후 일정 시간 동안 에러율이나 응답 시간을 모니터링해서 자동으로 롤백하는 구조를 추가하고 싶습니다. 둘째, 단일 서버 기반이기 때문에 서버 자체에 장애가 생기면 대응이 어렵습니다. 다중 서버 환경으로 확장하게 된다면 컨테이너 오케스트레이션 도입과 함께 배포 전략도 재설계할 필요가 있다고 생각합니다. 이런 개선을 통해 배포 자동화의 완성도를 한 단계 더 높일 수 있을 것입니다.