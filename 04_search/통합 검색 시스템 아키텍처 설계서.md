시스템 목표  
현재 CMS는 멀티사이트 및 메뉴 기반 구조로 콘텐츠가 여러 도메인에 분산되어 있어 사용자가 원하는 정보를 빠르게 찾기 어렵다.  
본 통합검색 시스템의 목표는 CMS 전역 콘텐츠를 하나의 검색 인터페이스로 제공하면서도 사이트 정책과 권한 정책을 정확히 반영하고, 온프레미스 환경에서 안정적으로 운영 가능한 구조를 구축하는 것이다.

주요 목표:

- CMS 전체 도메인을 아우르는 통합검색 제공
    
- 사이트 단위 분리 및 접근 권한 정책을 검색 결과에 정확히 반영
    
- 키워드 검색과 의미 기반 검색을 함께 지원하는 하이브리드 검색 구조
    
- 운영 복잡도를 낮추고 데이터 정합성을 우선하는 구조
    

검색 아키텍처 전략  
Option A: 단일 Elasticsearch(OpenSearch 포함) 기반 Hybrid Search 전략을 선택한다.  
검색 기능은 하나의 검색 엔진 내부에서 모두 처리한다.

데이터 흐름 개념:  
CMS 데이터 → 색인 파이프라인 → Elasticsearch 인덱스

각 문서는 다음 정보를 포함하여 색인된다:

- 키워드 검색용 텍스트 필드
    
- 의미 검색용 벡터 임베딩 필드
    

검색 시에는 키워드 점수(BM25)와 벡터 유사도 점수를 결합하여 최종 랭킹을 결정한다.

별도 벡터 DB를 사용하지 않는 이유  
본 설계에서는 별도의 벡터 데이터베이스를 사용하지 않는다.

이유:

- 검색 시스템을 두 개 운영할 경우 운영 복잡도가 크게 증가
    
- 콘텐츠 변경 시 두 시스템에 대한 동기화 부담 발생
    
- 장애 지점이 늘어나 시스템 안정성이 낮아짐
    
- 온프레미스 환경에서는 단일 스택 구조가 운영에 유리
    

따라서 벡터 검색은 Elasticsearch의 kNN 기능을 활용하여 내부 필드로 처리한다.

기능 범위

v1 (MVP)

- 키워드 기반 통합검색
    
- 한국어 형태소 분석기 적용 (예: Nori)
    
- 사이트 단위 및 권한 필터링
    
- 도메인 필터 (게시판, 컨텐츠 등)
    
- 정렬 옵션 (정확도순, 최신순)
    

v2 (고도화 단계)

- 벡터 기반 의미 검색 도입
    
- 키워드 + 벡터 점수를 결합한 Hybrid scoring
    
- 검색 로그 기반 랭킹 개선
    
- 자동완성 및 추천 검색어 기능
    

인덱스 구조 개념  
각 문서는 다음 필드를 포함한다:

- title, body, tags: 키워드 검색 대상
    
- siteHostName, menuPath: 필터링용
    
- createdAt, updatedAt: 정렬 기준
    
- accessLevel: 권한 필터링
    
- embedding 벡터 필드: 의미 검색용
    

색인 전략

- CMS CRUD 이벤트 기반 준실시간 색인
    
- 주기적 배치 작업을 통한 정합성 검증 및 재색인
    
- 삭제 또는 비공개 처리 시 즉시 색인 반영
    

기술 방향 요약

- 검색 엔진: Elasticsearch 또는 OpenSearch
    
- 벡터 처리: ES 내부 벡터 필드(kNN 검색)
    
- 한국어 처리: 형태소 분석기 사용
    
- 아키텍처: 단일 검색 엔진 구조
    
- 별도 벡터 DB: 사용하지 않음 (향후 고도화 시 검토 가능)
    

설계 원칙

- 검색 시스템에서 가장 중요한 것은 정확한 필터링과 데이터 정합성
    
- 벡터 기반 의미 검색은 고도화 단계에서 도입
    
- 운영 복잡도 최소화
    
- 시스템 안정성과 유지보수성을 우선시한다